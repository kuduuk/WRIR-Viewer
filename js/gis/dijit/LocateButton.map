{"version":3,"file":"LocateButton.js","sources":["LocateButton.js"],"names":["define","declare","lang","LocateButton","SimpleRenderer","PictureMarkerSymbol","GraphicsLayer","InfoTemplate","topic","growlTemplate","constructor","options","node","this","parentNode","startup","symbol","graphics","id","renderer","label","description","setRenderer","map","addLayer","graphicsLayer","infoTemplate","locateButton","on","hitch","_growlLocation","evt","stats","accuracy","position","coords","altitude","altitudeAccuracy","heading","latitude","longitude","speed","length","attributes","publishGPSPosition","publish","title","message","replace","level","timeout","opacity"],"mappings":";;;;;AAAAA,QACC,qBACA,kBACA,0BACA,gCACA,mCACA,4BACA,oBACA,cACE,SAAUC,EAASC,EAAMC,EAAcC,EAAgBC,EAAqBC,EAAeC,EAAcC,GAC3G,MAAOP,GAAQ,MACdQ,cAAe,wLACfC,YAAa,SAAUC,EAASC,GAC/BC,KAAKF,QAAUA,EACfE,KAAKC,WAAaF,GAEnBG,QAAS,WACR,GAAIC,GAAS,GAAIX,GAAoB,yrDAA0rD,GAAI,GACnuDQ,MAAKI,SAAW,GAAIX,IACnBY,GAAI,uBAEL,IAAIC,GAAW,GAAIf,GAAeY,EAClCG,GAASC,MAAQ,eACjBD,EAASE,YAAc,eACvBR,KAAKI,SAASK,YAAYH,GAC1BN,KAAKF,QAAQY,IAAIC,SAASX,KAAKI,UAC/BJ,KAAKF,QAAQc,cAAgBZ,KAAKI,SAClCJ,KAAKF,QAAQe,aAAe,GAAInB,GAAa,eAAgB,QAC7DM,KAAKF,QAAQK,OAAS,KAEtBH,KAAKc,aAAe,GAAIxB,GAAaU,KAAKF,QAASE,KAAKC,YACxDD,KAAKc,aAAaZ,UAClBF,KAAKc,aAAaC,GAAG,SAAU1B,EAAK2B,MAAMhB,KAAM,oBAEjDiB,eAAgB,SAAUC,GACzB,GAAIC,IACHC,SAAWF,EAAIG,SAASC,OAAe,SAAIJ,EAAIG,SAASC,OAAOF,SAAW,GAC1EG,SAAWL,EAAIG,SAASC,OAAe,SAAIJ,EAAIG,SAASC,OAAOC,SAAW,GAC1EC,iBAAmBN,EAAIG,SAASC,OAAuB,iBAAIJ,EAAIG,SAASC,OAAOE,iBAAmB,GAClGC,QAAUP,EAAIG,SAASC,OAAc,QAAIJ,EAAIG,SAASC,OAAOG,QAAU,GACvEC,SAAWR,EAAIG,SAASC,OAAe,SAAIJ,EAAIG,SAASC,OAAOI,SAAW,GAC1EC,UAAYT,EAAIG,SAASC,OAAgB,UAAIJ,EAAIG,SAASC,OAAOK,UAAY,GAC7EC,MAAQV,EAAIG,SAASC,OAAY,MAAIJ,EAAIG,SAASC,OAAOM,MAAQ,GAG9D5B,MAAKI,SAASA,SAASyB,OAAS,IACnC7B,KAAKI,SAASA,SAAS,GAAG0B,WAAaX,GAGpCnB,KAAKF,QAAQiC,oBAChBpC,EAAMqC,QAAQ,iBACbC,MAAO,eACPC,QAAS7C,EAAK8C,QAAQnC,KAAKJ,cAAeuB,GAC1CiB,MAAO,UACPC,QAAS,IACTC,QAAS","sourcesContent":["define([\n\t'dojo/_base/declare',\n\t'dojo/_base/lang',\n\t'esri/dijit/LocateButton',\n\t'esri/renderers/SimpleRenderer',\n\t'esri/symbols/PictureMarkerSymbol',\n\t'esri/layers/GraphicsLayer',\n\t'esri/InfoTemplate',\n\t'dojo/topic'\n], function (declare, lang, LocateButton, SimpleRenderer, PictureMarkerSymbol, GraphicsLayer, InfoTemplate, topic) {\n\treturn declare(null, {\n\t\tgrowlTemplate: 'latitude: {latitude}<br/>longitude: {longitude}<br/>accuracy: {accuracy}<br/>altitude: {altitude}<br/>altitude accuracy: {altitudeAccuracy}<br/>heading: {heading}<br/>speed: {speed}',\n\t\tconstructor: function (options, node) {\n\t\t\tthis.options = options;\n\t\t\tthis.parentNode = node;\n\t\t},\n\t\tstartup: function () {\n\t\t\tvar symbol = new PictureMarkerSymbol('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACYAAAAmCAYAAACoPemuAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABJhJREFUeNrcmN9PW2UYx7/n9ATKj7QMMUCxmSxlCRI3BzF6MRO9WOyVN5sJFxqvNCa7MmbphTG78Iprwx+weEMiF8bdLNFojBhNDEwu3ObWjo2uLUXKaIFSCqdnz7e8hx1WdOcUij+e5ElLOe3zyfd93ud9nlezLAte7LOv0S4vZ8VPi0eU72dx5bPiU+Jr9j8+fevpcTS3YALUIy/viUdRn10TvyK+cChgTwL5dOCZNqA7CARbgIB//+8VSkB+A8jmgdw6YFb2AgrcQt1gAsUli4m3E6gnAAx0A61N3qQqloE7WZGqsAvIZR0TuCnPYAJ1UV4u8H2oAzhZB9B+gLcFML2y+9GkwI27BhOomL10g71AfxcO1eaWgJuZx0srcGNPBbOV4tK9emInjxphzL9f7u4ubY1y+j45VV2+RkLR+NuMoeyCil0LpnZfzF6+RkI54RhLWUwx1CjGktDORD/snPo7YyzGZGzF8BhMkUaZV9x9R22M6duRKGqrpjvUqtapg5aEeowxGdvJoquzr6rWgEe1uJ8rFrSy+EYFOp3v+ZnlEW5gr2rthjqQq8eMF7UYvGRBL5jwFbZhFCs76rfqqAQMbAd8MP0aKroGy61qZFhcrf551lBdQvXs8wK1VoFvoYym+5vwT6ceBrMrq36YW+gOtJRGng/ljzej1NOEcrsO0y0cGRTYacNuW9yWB0agUoSaLpiBianfw5l7ydbBvle0Yi6Dn+IT1s8n+ouj588nR441F55rxmaLBlNzWT6URXbB/qpLqAETtbh8VGrih9nwYHi47e33TyErx3Lhfhc6Zl7Ufrs62TaxfiXc9eEHCS4rl1RzoZqDIaJ73UHbbGkkp64/WAqm/7jROvAacGtTzj5Zgrvii5YJq/N1pH/8tvX6rTtBPrtdx071DGaKYkz0zFLOf/LZF7TMn0BqXlqaJJBZLCOVzwEbq7CWwlpmPunns/yO1zhG3cVHEn0rn8bq3DBK0s4UimsoPlzZaboyImFB1tY06/55z4r5JFdYEno7g6W5+HfW9vwGyullbKSkl7knaiXyVdcqv1q9faESn/W53JUHAqPETOgz/eF8KDJYnPnmC6wncrASotRN6aFnRKnclwi9ca545tRQns8adSoWt3t0N8bdxeLJOjX6zrvJQMfq+vJXFy1c/Rz4fhz68kdW3zn/+ugnl5N8hs9qLhVzMMQNBRZh4+amZDCLuf1ZPEc6/YWuSx8npt+MBrMPUn5UKugOXSqNDL+0W2CrpcJD8+gE49wX5TQTPuZSZlGAFZ3Fk0t1/OWhUnFk6EBHEo0MymYNNYzGOGJxWHB7XjIgKzqDdxrYsksCE91QS+6lRjA2GZRN6dJrc5S6xt6bI5YX0xRgEyFFKTrf6x6haIyt+n8OJ2v2ruSEXC1BJD9qY0zGdrLo6i5hwVbtdvbowW6k96i18GQdI+kah1HOfUdljKVaHabUeE2BVaTVwZPDqGPrNswYwzH4jql8r6386i5hku85jDYSzh54HVcFU//NK4JGX6ow0VVOeb9U+VdfQzX44m7cmej/r6vOf+py+JEAAwDRMD/uB0XQuQAAAABJRU5ErkJggg==', 38, 38);\n\t\t\tthis.graphics = new GraphicsLayer({\n\t\t\t\tid: 'GeoLocationGraphics'\n\t\t\t});\n\t\t\tvar renderer = new SimpleRenderer(symbol);\n\t\t\trenderer.label = 'GPS Position';\n\t\t\trenderer.description = 'GPS Position';\n\t\t\tthis.graphics.setRenderer(renderer);\n\t\t\tthis.options.map.addLayer(this.graphics);\n\t\t\tthis.options.graphicsLayer = this.graphics;\n\t\t\tthis.options.infoTemplate = new InfoTemplate('GPS Position', '${*}');\n\t\t\tthis.options.symbol = null;\n\n\t\t\tthis.locateButton = new LocateButton(this.options, this.parentNode);\n\t\t\tthis.locateButton.startup();\n\t\t\tthis.locateButton.on('locate', lang.hitch(this, '_growlLocation'));\n\t\t},\n\t\t_growlLocation: function (evt) {\n\t\t\tvar stats = {\n\t\t\t\taccuracy: (evt.position.coords.accuracy) ? evt.position.coords.accuracy : '',\n\t\t\t\taltitude: (evt.position.coords.altitude) ? evt.position.coords.altitude : '',\n\t\t\t\taltitudeAccuracy: (evt.position.coords.altitudeAccuracy) ? evt.position.coords.altitudeAccuracy : '',\n\t\t\t\theading: (evt.position.coords.heading) ? evt.position.coords.heading : '',\n\t\t\t\tlatitude: (evt.position.coords.latitude) ? evt.position.coords.latitude : '',\n\t\t\t\tlongitude: (evt.position.coords.longitude) ? evt.position.coords.longitude : '',\n\t\t\t\tspeed: (evt.position.coords.speed) ? evt.position.coords.speed : ''\n\t\t\t};\n\n\t\t\tif (this.graphics.graphics.length > 0) {\n\t\t\t\tthis.graphics.graphics[0].attributes = stats;\n\t\t\t}\n\n\t\t\tif (this.options.publishGPSPosition) {\n\t\t\t\ttopic.publish('growler/growl', {\n\t\t\t\t\ttitle: 'GPS Position',\n\t\t\t\t\tmessage: lang.replace(this.growlTemplate, stats),\n\t\t\t\t\tlevel: 'default', //can be: 'default', 'warning', 'info', 'error', 'success'.\n\t\t\t\t\ttimeout: 10000, //set to 0 for no timeout\n\t\t\t\t\topacity: 1.0\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n});"]}
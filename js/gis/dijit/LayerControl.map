{"version":3,"file":"LayerControl.js","sources":["LayerControl.js"],"names":["define","declare","array","lang","topic","domAttr","domConst","WidgetBase","Container","ContentPane","Button","ProjectParameters","esriConfig","require","LayerControl","map","layerInfos","icons","expand","collapse","checked","unchecked","update","menu","folder","folderOpen","separated","overlayReorder","overlayLabel","vectorReorder","vectorLabel","noMenu","noLegend","noZoom","noTransparency","subLayerMenu","swipe","swiperButtonStyle","baseClass","_vectorContainer","_overlayContainer","_swiper","_swipeLayerToggleHandle","_controls","dynamic","feature","image","tiled","csv","georss","wms","kml","webtiled","imagevector","raster","stream","constructor","options","publish","source","error","postCreate","this","inherited","arguments","ControlContainer","addChild","className","content","create","modules","forEach","layerInfo","controlOptions","exclude","mod","type","push","hitch","control","_checkReorder","_addControl","layerControl","controller","layer","getLayer","layerTitle","title","mixin","expanded","sublayers","startup","_layerType","_moveUp","index","id","node","domNode","getPreviousSibling","indexOf","layerIds","reorderLayer","containerNode","insertBefore","previousSibling","graphicsLayerIds","_moveDown","getNextSibling","nextSibling","getChildren","child","_reorderUp","set","_reorderDown","_zoomToLayer","declaredClass","spatialReference","setExtent","fullExtent","defaults","geometryService","project","geometries","outSR","r","e","_swipeLayer","visible","disable","remove","enable","disableBtn","LayerSwipe","layers","label","onClick","subscribe","d","_swipeDisable","showAllLayers","show","hideAllLayers","hide"],"mappings":"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","sourcesContent":["define([\n    'dojo/_base/declare',\n    'dojo/_base/array',\n    'dojo/_base/lang',\n    'dojo/topic',\n    'dojo/dom-attr',\n    'dojo/dom-construct',\n    'dijit/_WidgetBase',\n    'dijit/_Container',\n    'dijit/layout/ContentPane',\n    'dijit/form/Button',\n    'esri/tasks/ProjectParameters',\n    'esri/config',\n    'require',\n    'xstyle/css!./LayerControl/css/LayerControl.css'\n], function (\n    declare,\n    array,\n    lang,\n    topic,\n    domAttr,\n    domConst,\n    WidgetBase,\n    Container,\n    ContentPane,\n    Button,\n    ProjectParameters,\n    esriConfig,\n    require\n) {\n    var LayerControl = declare([WidgetBase, Container], {\n        map: null,\n        layerInfos: [],\n        icons: {\n            expand: 'fa-plus-square-o',\n            collapse: 'fa-minus-square-o',\n            checked: 'fa-check-square-o',\n            unchecked: 'fa-square-o',\n            update: 'fa-refresh',\n            menu: 'fa-bars',\n            folder: 'fa-folder-o',\n            folderOpen: 'fa-folder-open-o'\n        },\n        separated: false,\n        overlayReorder: false,\n        overlayLabel: false,\n        vectorReorder: false,\n        vectorLabel: false,\n        noMenu: null,\n        noLegend: null,\n        noZoom: null,\n        noTransparency: null,\n        subLayerMenu: {},\n        swipe: null,\n        swiperButtonStyle: 'position:absolute;top:20px;left:120px;z-index:50;',\n        // ^args\n        baseClass: 'layerControlDijit',\n        _vectorContainer: null,\n        _overlayContainer: null,\n        _swiper: null,\n        _swipeLayerToggleHandle: null,\n        _controls: {\n            dynamic: './LayerControl/controls/Dynamic',\n            feature: './LayerControl/controls/Feature',\n            image: './LayerControl/controls/Image',\n            tiled: './LayerControl/controls/Tiled',\n            csv: './LayerControl/controls/CSV',\n            georss: './LayerControl/controls/GeoRSS',\n            wms: './LayerControl/controls/WMS',\n            kml: './LayerControl/controls/KML',\n            webtiled: './LayerControl/controls/WebTiled',\n            imagevector: './LayerControl/controls/ImageVector',\n            raster: './LayerControl/controls/Raster',\n            stream: './LayerControl/controls/Stream'\n        },\n        constructor: function (options) {\n            options = options || {};\n            if (!options.map) {\n                topic.publish('viewer/handleError', {\n                    source: 'LayerControl',\n                    error: 'map option is required'\n                });\n                return;\n            }\n        },\n        postCreate: function () {\n            this.inherited(arguments);\n            if (this.separated) {\n                var ControlContainer = declare([WidgetBase, Container]);\n                // vector layer label\n                if (this.vectorLabel !== false) {\n                    this.addChild(new ContentPane({\n                        className: 'vectorLabelContainer',\n                        content: this.vectorLabel\n                    }, domConst.create('div')), 'first');\n                }\n                // vector layer control container\n                this._vectorContainer = new ControlContainer({\n                    className: 'vectorLayerContainer'\n                }, domConst.create('div'));\n                this.addChild(this._vectorContainer, 'last');\n                // overlay layer label\n                if (this.overlayLabel !== false) {\n                    this.addChild(new ContentPane({\n                        className: 'overlayLabelContainer',\n                        content: this.overlayLabel\n                    }, domConst.create('div')), 'last');\n                }\n                // overlay layer control container\n                this._overlayContainer = new ControlContainer({\n                    className: 'overlayLayerContainer'\n                }, domConst.create('div'));\n                this.addChild(this._overlayContainer, 'last');\n            } else {\n                this.overlayReorder = false;\n                this.vectorReorder = false;\n            }\n            // load only the modules we need\n            var modules = [];\n            // push layer control mods\n            array.forEach(this.layerInfos, function (layerInfo) {\n                // check if control is excluded\n                var controlOptions = layerInfo.controlOptions;\n                if (controlOptions && controlOptions.exclude === true) {\n                    return;\n                }\n                var mod = this._controls[layerInfo.type];\n                if (mod) {\n                    modules.push(mod);\n                } else {\n                    topic.publish('viewer/handleError', {\n                        source: 'LayerControl',\n                        error: 'the layer type \"' + layerInfo.type + '\" is not supported'\n                    });\n                }\n            }, this);\n            // load and go\n            require(modules, lang.hitch(this, function () {\n                array.forEach(this.layerInfos, function (layerInfo) {\n                    // exclude from widget\n                    var controlOptions = layerInfo.controlOptions;\n                    if (controlOptions && controlOptions.exclude === true) {\n                        return;\n                    }\n                    var control = this._controls[layerInfo.type];\n                    if (control) {\n                        require([control], lang.hitch(this, '_addControl', layerInfo));\n                    }\n                }, this);\n                this._checkReorder();\n            }));\n        },\n        // create layer control and add to appropriate _container\n        _addControl: function (layerInfo, LayerControl) {\n            var layerControl = new LayerControl({\n                controller: this,\n                layer: (typeof layerInfo.layer === 'string') ? this.map.getLayer(layerInfo.layer) : layerInfo.layer, // check if we have a layer or just a layer id\n                layerTitle: layerInfo.title,\n                controlOptions: lang.mixin({\n                    noLegend: null,\n                    noZoom: null,\n                    noTransparency: null,\n                    swipe: null,\n                    expanded: false,\n                    sublayers: true,\n                    menu: this.subLayerMenu[layerInfo.type]\n                }, layerInfo.controlOptions)\n            });\n            layerControl.startup();\n            if (this.separated) {\n                if (layerControl._layerType === 'overlay') {\n                    this._overlayContainer.addChild(layerControl, 'first');\n                } else {\n                    this._vectorContainer.addChild(layerControl, 'first');\n                }\n            } else {\n                this.addChild(layerControl, 'first');\n            }\n        },\n        // move control up in controller and layer up in map\n        _moveUp: function (control) {\n            var id = control.layer.id,\n                node = control.domNode,\n                index;\n            if (control._layerType === 'overlay') {\n                if (control.getPreviousSibling()) {\n                    index = array.indexOf(this.map.layerIds, id);\n                    this.map.reorderLayer(id, index + 1);\n                    this._overlayContainer.containerNode.insertBefore(node, node.previousSibling);\n                    this._checkReorder();\n                }\n            } else if (control._layerType === 'vector') {\n                if (control.getPreviousSibling()) {\n                    index = array.indexOf(this.map.graphicsLayerIds, id);\n                    this.map.reorderLayer(id, index + 1);\n                    this._vectorContainer.containerNode.insertBefore(node, node.previousSibling);\n                    this._checkReorder();\n                }\n            }\n        },\n        // move control down in controller and layer down in map\n        _moveDown: function (control) {\n            var id = control.layer.id,\n                node = control.domNode,\n                index;\n            if (control._layerType === 'overlay') {\n                if (control.getNextSibling()) {\n                    index = array.indexOf(this.map.layerIds, id);\n                    this.map.reorderLayer(id, index - 1);\n                    this._overlayContainer.containerNode.insertBefore(node, node.nextSibling.nextSibling);\n                    this._checkReorder();\n                }\n            } else if (control._layerType === 'vector') {\n                if (control.getNextSibling()) {\n                    index = array.indexOf(this.map.graphicsLayerIds, id);\n                    this.map.reorderLayer(id, index - 1);\n                    this._vectorContainer.containerNode.insertBefore(node, node.nextSibling.nextSibling);\n                    this._checkReorder();\n                }\n            }\n        },\n        // enable/disable move up/down menu items when the last or first child respectively\n        _checkReorder: function () {\n            if (this.separated) {\n                if (this.vectorReorder) {\n                    array.forEach(this._vectorContainer.getChildren(), function (child) {\n                        if (!child.getPreviousSibling()) {\n                            child._reorderUp.set('disabled', true);\n                        } else {\n                            child._reorderUp.set('disabled', false);\n                        }\n                        if (!child.getNextSibling()) {\n                            child._reorderDown.set('disabled', true);\n                        } else {\n                            child._reorderDown.set('disabled', false);\n                        }\n                    }, this);\n                }\n                if (this.overlayReorder) {\n                    array.forEach(this._overlayContainer.getChildren(), function (child) {\n                        if (!child.getPreviousSibling()) {\n                            child._reorderUp.set('disabled', true);\n                        } else {\n                            child._reorderUp.set('disabled', false);\n                        }\n                        if (!child.getNextSibling()) {\n                            child._reorderDown.set('disabled', true);\n                        } else {\n                            child._reorderDown.set('disabled', false);\n                        }\n                    }, this);\n                }\n            }\n        },\n        // zoom to layer\n        _zoomToLayer: function (layer) {\n            if (layer.declaredClass === 'esri.layers.KMLLayer') {\n                return;\n            }\n\n            // need to \"merge\" each kml layers fullExtent for project geometries\n\n            var map = this.map;\n            if (layer.spatialReference === map.spatialReference) {\n                map.setExtent(layer.fullExtent, true);\n            } else {\n                if (esriConfig.defaults.geometryService) {\n                    esriConfig.defaults.geometryService.project(lang.mixin(new ProjectParameters(), {\n                        geometries: [layer.fullExtent],\n                        outSR: map.spatialReference\n                    }), function (r) {\n                        map.setExtent(r[0], true);\n                    }, function (e) {\n                        topic.publish('viewer/handleError', {\n                            source: 'LayerControl._zoomToLayer',\n                            error: e\n                        });\n                    });\n                } else {\n                    topic.publish('viewer/handleError', {\n                        source: 'LayerControl._zoomToLayer',\n                        error: 'esriConfig.defaults.geometryService is not set'\n                    });\n                }\n            }\n        },\n        // layer swiper\n        _swipeLayer: function (layer, type) {\n            if (!layer || !layer.visible) {\n                return;\n            }\n            if (!this._swiper) {\n                require(['esri/dijit/LayerSwipe'], lang.hitch(this, function (LayerSwipe) {\n                    this._swiper = new LayerSwipe({\n                        type: type || 'vertical',\n                        map: this.map,\n                        layers: [layer]\n                    }, domConst.create('div', {}, this.map.id, 'first'));\n                    this._swiper.startup();\n                    this._swiper.disableBtn = new Button({\n                        label: 'Exit Layer Swipe',\n                        onClick: lang.hitch(this, '_swipeDisable')\n                    }, domConst.create('div', {}, this.map.id));\n                    domAttr.set(this._swiper.disableBtn.domNode, 'style', this.swiperButtonStyle);\n                }));\n            } else {\n                this._swiper.disable();\n                if (this._swipeLayerToggleHandle) {\n                    this._swipeLayerToggleHandle.remove();\n                }\n                this._swiper.set('layers', [layer]);\n                this._swiper.set('type', type);\n                this._swiper.enable();\n                domAttr.set(this._swiper.disableBtn.domNode, 'style', this.swiperButtonStyle);\n            }\n            this._swipeLayerToggleHandle = topic.subscribe('layerControl/layerToggle', lang.hitch(this, function (d) {\n                if (d.id === layer.id && !d.visible) {\n                    this._swipeDisable();\n                }\n            }));\n        },\n        _swipeDisable: function () {\n            this._swiper.disable();\n            if (this._swipeLayerToggleHandle) {\n                this._swipeLayerToggleHandle.remove();\n            }\n            domAttr.set(this._swiper.disableBtn.domNode, 'style', 'display:none;');\n        },\n        // turn all layers on/off\n        //   no arguments\n        //   b/c controls are self aware of layer visibility change simply show/hide layers\n        showAllLayers: function () {\n            if (this.separated) {\n                array.forEach(this._vectorContainer.getChildren(), function (child) {\n                    child.layer.show();\n                });\n                array.forEach(this._overlayContainer.getChildren(), function (child) {\n                    child.layer.show();\n                });\n            } else {\n                array.forEach(this.getChildren(), function (child) {\n                    child.layer.show();\n                });\n            }\n        },\n        hideAllLayers: function () {\n            if (this.separated) {\n                array.forEach(this._vectorContainer.getChildren(), function (child) {\n                    child.layer.hide();\n                });\n                array.forEach(this._overlayContainer.getChildren(), function (child) {\n                    child.layer.hide();\n                });\n            } else {\n                array.forEach(this.getChildren(), function (child) {\n                    child.layer.hide();\n                });\n            }\n        }\n    });\n    return LayerControl;\n});"]}